var fs = require('fs'),
    exec = require('child_process').exec,
    spawn = require('child_process').spawn,
    pool = require("./lib/db"),
    request = require("request"),
    jsdom = require("jsdom");

/**
 * Get Work INDEX
 */

function getIndex() {
  console.log("processing ");

  request({uri: 'http://li-ma.nl/site/catalogue/work/index?orderby=&guistype=&guislist=&guisort=&guidisplay=&limit=2366&prevkey=A&offset=0&xhr=true'}, function(err, response, body) {

    if(err && response.statusCode !== 200) {
      console.log('Request error.');      
    }

    var worksArr = [];
    
    jsdom.env({
      html: body, scripts: ['http://code.jquery.com/jquery-1.6.min.js'], 
      done: function(err, window) {
        var $ = window.jQuery;
        var works = $("li.grid-4");

        $(works).each(function(i) { 
          
          // worksArr.push({
          //   href: $(this).find("a").attr("href"),
          //   text: $(this).find("a").text().trim()
          // });       

          pool.query("INSERT INTO works SET href = ?, title = ?", [$(this).find("a").attr("href"), $(this).find("a").text().trim()], function() {
            console.log("inserted", i);
          });

        });
      
      }

    });
  });
}


/**
 * Get Work DATA loop
 */

function getWorkData(ID) {
  console.log("getting ID: ", ID);
  
  pool.query("SELECT href FROM works WHERE id = ?", [ID], function(data) {
    getData(data[0].href, function(work) {
      console.log(work);
      pool.query("UPDATE works SET artist = ?, length = ?, year = ? WHERE id = ?", [work.artist, work.length, work.year, ID], function() {
        console.log("saved", ID);
        setTimeout(function() {
          getWorkData(ID+1);

        }, Math.floor(Math.random()*3000));

      });
    });
  });
}

/**
 * Get Work Data
 */

function getData(href, callback) {
 request({uri: href}, function(err, response, body) {

    if(err && response.statusCode !== 200) {
      console.log('Request error.');      
    }

    var work = {};
    
    jsdom.env({
      html: body, scripts: ['http://code.jquery.com/jquery-1.6.min.js'], 
      done: function(err, window) {
        var $ = window.jQuery;
      
        work.year = $(".meta-guidate:first").text().substr(2);
        work.length = $(".meta-length:first").text().substr(2).replace("\'\'", "").replace("'", ".");
        work.artist = $(".meta-creators:first").text();

        window.close();
        callback(work);      
      }

    });
  });  

}


/**
 * Convert Minutes To Seconds
 */

function convertMinutesToSeconds(ID) {
  console.log("getting ID: ", ID);

  pool.query("SELECT minutes FROM works WHERE id = ?", [ID], function(data) {  
    var minutes = data[0].minutes.toString().split(".");
    var seconds = (parseInt(minutes[0]) * 60) + parseInt(minutes[1]);
    console.log(seconds);    
      
    pool.query("UPDATE works SET seconds = ? WHERE id = ?", [seconds, ID], function() {
      convertMinutesToSeconds(ID+1);
    });  
  
  });
}


/**
 * Download and Compress Videos
 */

function downloadAndCompress(ID) {
  console.log("getting ID: ", ID);
  
  pool.query("SELECT videoURL FROM works WHERE id = ?", [ID], function(data) {
    downloadVideo(data[0].videoURL, function(filename) {      
      compressVideo(filename, function(shrunk) {          

        exec("rm videos/"+filename, function(err,std) {
          downloadAndCompress(ID+1);
        });
      });
    });
  });
}

/**
 * The Download Function
 */

function downloadVideo(filename, callback) {
  console.log("downloading: ", filename);

  var url = "http://media.li-ma.nl/view/";
  var urlLink = url + filename;

  var child = spawn("wget", ["-O", "videos/"+filename, urlLink]);
  
  child.stdout.on('data', function(data) {
    //console.log('stdout: ' + data);
  });

  child.stderr.on('data', function(data) {
    // console.log('stdout: ' + data);
  });  

  child.on('close', function(code) {
    console.log('closing code: ' + code);
    callback(filename);
  });

}


/**
 * Compress and Speed up Videos
 */

function compressVideo(filename, callback) {
  var file = filename.split(".");
  var smfile = file[0]+"s."+file[1];  
  console.log("compressing: ", file, smfile);

  fs.readFile("videos/"+smfile, function(err, data) {
    //file does not exist
    if(err) {

      var child = exec('ffmpeg -i videos/'+filename+' -filter:v "setpts=0.0517*PTS" -filter:a "atempo=1.2,atempo=2.0,atempo=2.0,atempo=2.0,atempo=2.0" videos/'+smfile);

      child.stdout.on('data', function(data) {
        //console.log('stdout: ' + data);
      });

      child.stderr.on('data', function(data) {
        // console.log('stdout: ' + data);
      });

      child.on('close', function(code) {
        console.log('closing code: ' + code);
        callback(filename);
      });

    } else {
      callback("already processed");
    }

  });
}


/**
 * Unify video format
 */

function unifyVideoFormat(ID) {
  console.log("getting ID: ", ID);
  
  pool.query("SELECT videoURL FROM works WHERE id = ?", [ID], function(data) {

    var fileSplit = data[0].videoURL.split(".");
    var filename = fileSplit[0] + "s." + fileSplit[1]; 

    extendBlackBars(ID, filename, function(filename) {
      //move forward      
      unifyVideoFormat(ID+1);
    });
  });
}

/**
 * Extend Black Bars and unify video format
 */

function extendBlackBars(ID, filename, callback) {  
  var filenameOut = ID + "_" + filename;

  exec("ffprobe videos/" + filename, function(stderr, stdout, data) {
        
    var wh = data.match(/(\d\d+)x(\d+)/gi);
    
    if(wh) {
      var whh = wh[0].split("x");
      console.log(whh);

      var widthPro = (Math.abs(1-1280/whh[0])/2).toFixed(4);
      var heightPro = (Math.abs(1-720/whh[1])/2).toFixed(4);

      var cmd = 'ffmpeg -y -i videos/'+filename+' -f lavfi -i color=c=black:s=1280x720 -filter_complex "[0:v]scale=w=1*iw:h=1*ih[scaled]; [1:v][scaled]overlay=x='+widthPro+'*w:y='+heightPro+'*h:eof_action=endall[out]; [0:a]anull[aud]" -map "[out]" -map "[aud]" -strict -2 unified/'+filenameOut;
    
      var child = exec(cmd);

      child.stdout.on('data', function(data) {
        //console.log('stdout: ' + data);
      });

      child.stderr.on('data', function(data) {
        // console.log('stdout: ' + data);
      });

      child.on('close', function(code) {
        console.log('closing code: ' + code);
        callback(filename);
      });


    } else {
      console.log("ERROR, NO VIDEO SIZE::: ", ID);
      callback("error, no video size");
    }
  
  });
}

/**
 * Array of all unified videos
 */

var videos = ["1_20448s.mp4","2_14476s.mp4","4_78130s.mp4","5_15890s.mp4","6_117780s.mp4","7_14772s.mp4","8_72511s.mp4","9_15159s.mp4","10_14820s.mp4","11_14834s.mp4","13_104047s.mp4","14_14554s.mp4","15_17920s.mp4","16_14300s.mp4","17_15782s.mp4","19_54265s.mp4","20_79868s.mp4","21_79869s.mp4","22_77503s.mp4","23_22503s.mp4","24_15776s.mp4","26_15229s.mp4","27_20972s.mp4","28_14636s.mp4","29_15177s.mp4","30_14695s.mp4","31_77504s.mp4","32_119466s.mp4","33_94014s.mp4","35_100080s.mp4","36_15220s.mp4","37_14314s.mp4","38_20099s.mp4","39_79474s.mp4","40_95001s.mp4","41_22400s.mp4","42_14510s.mp4","43_14794s.mp4","44_15866s.mp4","45_100843s.mp4","46_100842s.mp4","47_94152s.mp4","48_14773s.mp4","50_15503s.mp4","51_14905s.mp4","53_14315s.mp4","54_15307s.mp4","55_163709s.mp4","56_15655s.mp4","57_153044s.mp4","58_14461s.mp4","59_152015s.mp4","60_15852s.mp4","61_15459s.mp4","62_16585s.mp4","64_15607s.mp4","65_98369s.mp4","66_14303s.mp4","67_87077s.mp4","68_14919s.mp4","69_72048s.mp4","70_15919s.mp4","71_14826s.mp4","72_39108s.mp4","73_13433s.mp4","74_15474s.mp4","75_15308s.mp4","76_17852s.mp4","77_15931s.mp4","78_14462s.mp4","79_15051s.mp4","80_15359s.mp4","81_128280s.mp4","82_15165s.mp4","83_15827s.mp4","84_14652s.mp4","85_21214s.mp4","86_15450s.mp4","87_15417s.mp4","91_94461s.mp4","92_15696s.mp4","93_20389s.mp4","95_15006s.mp4","96_79180s.mp4","97_21685s.mp4","98_14316s.mp4","99_14765s.mp4","100_15057s.mp4","101_128279s.mp4","102_14463s.mp4","103_85481s.mp4","105_15082s.mp4","107_91755s.mp4","108_14084s.mp4","109_99989s.mp4","110_15774s.mp4","111_79184s.mp4","112_15495s.mp4","113_79472s.mp4","114_17915s.mp4","115_17913s.mp4","116_14637s.mp4","117_21385s.mp4","118_15702s.mp4","119_14846s.mp4","120_15178s.mp4","121_15468s.mp4","122_20380s.mp4","123_14886s.mp4","124_17894s.mp4","125_16550s.mp4","126_20390s.mp4","128_117789s.mp4","129_14752s.mp4","130_15160s.mp4","131_94051s.mp4","132_72049s.mp4","133_98372s.mp4","134_122718s.mp4","135_94263s.mp4","136_104217s.mp4","137_94264s.mp4","138_15908s.mp4","139_17907s.mp4","140_15330s.mp4","141_96842s.mp4","142_15910s.mp4","143_15888s.mp4","144_15918s.mp4","145_39155s.mp4","146_21680s.mp4","148_15451s.mp4","149_15016s.mp4","150_14383s.mp4","152_18293s.mp4","154_71299s.mp4","155_14162s.mp4","156_14968s.mp4","157_15791s.mp4","158_14571s.mp4","159_14572s.mp4","160_14573s.mp4","161_14574s.mp4","162_15497s.mp4","163_15566s.mp4","164_15107s.mp4","165_14541s.mp4","167_14934s.mp4","168_14527s.mp4","169_21682s.mp4","170_15416s.mp4","171_20469s.mp4","172_71301s.mp4","173_14904s.mp4","174_14306s.mp4","175_14317s.mp4","177_15187s.mp4","178_14650s.mp4","181_22518s.mp4","182_51405s.mp4","183_15756s.mp4","184_117790s.mp4","185_15647s.mp4","186_12499s.mp4","187_17364s.mp4","189_104007s.mp4","190_16526s.mp4","192_20394s.mp4","193_35830s.mp4","194_14134s.mp4","195_35831s.mp4","196_35833s.mp4","197_35834s.mp4","198_14144s.mp4","199_14147s.mp4","200_14150s.mp4","201_35838s.mp4","202_14154s.mp4","203_35931s.mp4","204_14158s.mp4","205_35932s.mp4","206_14966s.mp4","207_15018s.mp4","208_15309s.mp4","209_15208s.mp4","210_15948s.mp4","212_15949s.mp4","213_15292s.mp4","214_14471s.mp4","215_14672s.mp4","217_100081s.mp4","218_22517s.mp4","219_14586s.mp4","220_77508s.mp4","221_13264s.mp4","223_15747s.mp4","224_15648s.mp4","225_15542s.mp4","226_15504s.mp4","227_14920s.mp4","228_15934s.mp4","229_21781s.mp4","230_14749s.mp4","231_15431s.mp4","232_15605s.mp4","233_15098s.mp4","234_14945s.mp4","235_15215s.mp4","236_15382s.mp4","237_15401s.mp4","238_14769s.mp4","239_20974s.mp4","241_15498s.mp4","242_104024s.mp4","243_22507s.mp4","244_14566s.mp4","245_14485s.mp4","246_14849s.mp4","247_17943s.mp4","248_15541s.mp4","254_14372s.mp4","255_15032s.mp4","256_15810s.mp4","257_14733s.mp4","258_17257s.mp4","259_15649s.mp4","260_14465s.mp4","261_14921s.mp4","263_20443s.mp4","265_14442s.mp4","266_15331s.mp4","267_14666s.mp4","269_14324s.mp4","270_15578s.mp4","271_15285s.mp4","272_14408s.mp4","273_15946s.mp4","274_20964s.mp4","275_15368s.mp4","276_21344s.mp4","277_15947s.mp4","278_83045s.mp4","279_14906s.mp4","280_15650s.mp4","281_14353s.mp4","282_14922s.mp4","283_14373s.mp4","285_14255s.mp4","286_17758s.mp4","288_17759s.mp4","289_79412s.mp4","290_17906s.mp4","291_15923s.mp4","292_14318s.mp4","293_14319s.mp4","294_14751s.mp4","295_14753s.mp4","297_15362s.mp4","298_15757s.mp4","299_15727s.mp4","300_14975s.mp4","301_39099s.mp4","302_14680s.mp4","303_15859s.mp4","304_15201s.mp4","305_15202s.mp4","306_14588s.mp4","307_15460s.mp4","308_80166s.mp4","309_15218s.mp4","310_15672s.mp4","311_15944s.mp4","312_15897s.mp4","313_14088s.mp4","314_106546s.mp4","315_104008s.mp4","317_14589s.mp4","318_41754s.mp4","319_22516s.mp4","320_15579s.mp4","321_15698s.mp4","323_105395s.mp4","324_46624s.mp4","325_14486s.mp4","328_14785s.mp4","329_95018s.mp4","330_18480s.mp4","331_15246s.mp4","332_14754s.mp4","333_16545s.mp4","334_15631s.mp4","335_14842s.mp4","337_100091s.mp4","336_14827s.mp4","338_14284s.mp4","339_15475s.mp4","340_15534s.mp4","341_14687s.mp4","342_117773s.mp4","343_14487s.mp4","345_14374s.mp4","346_14665s.mp4","347_15860s.mp4","348_14961s.mp4","349_15340s.mp4","350_14883s.mp4","352_117791s.mp4","353_14529s.mp4","355_17858s.mp4","356_15253s.mp4","357_14501s.mp4","358_16555s.mp4","359_14990s.mp4","360_14466s.mp4","362_15861s.mp4","363_14976s.mp4","364_15461s.mp4","365_15040s.mp4","366_94278s.mp4","368_15575s.mp4","369_101131s.mp4","370_14651s.mp4","371_15641s.mp4","372_15223s.mp4","373_14755s.mp4","374_14802s.mp4","375_14806s.mp4","376_15204s.mp4","377_14092s.mp4","379_14756s.mp4","380_21503s.mp4","381_72045s.mp4","382_14488s.mp4","383_15402s.mp4","385_106549s.mp4","386_15814s.mp4","387_15668s.mp4","389_12736s.mp4","390_102137s.mp4","394_15723s.mp4","395_15610s.mp4","396_14546s.mp4","397_14774s.mp4","400_15440s.mp4","401_15441s.mp4","403_15188s.mp4","404_15189s.mp4","405_15190s.mp4","406_14832s.mp4","408_94075s.mp4","409_15580s.mp4","411_14489s.mp4","413_14375s.mp4","414_15912s.mp4","415_117771s.mp4","416_15195s.mp4","417_93943s.mp4","418_14376s.mp4","419_16559s.mp4","420_14490s.mp4","421_14491s.mp4","422_14492s.mp4","423_14493s.mp4","424_14467s.mp4","425_16581s.mp4","426_17939s.mp4","427_16582s.mp4","429_72252s.mp4","430_14928s.mp4","431_72253s.mp4","432_14786s.mp4","434_15373s.mp4","435_79441s.mp4","436_14902s.mp4","437_15783s.mp4","438_14946s.mp4","440_17911s.mp4","442_15365s.mp4","443_15108s.mp4","444_15914s.mp4","445_15511s.mp4","446_15337s.mp4","447_15777s.mp4","448_20975s.mp4","449_36602s.mp4","450_14979s.mp4","451_14734s.mp4","452_17319s.mp4","454_14270s.mp4","457_15443s.mp4","458_18128s.mp4","459_15673s.mp4","460_72248s.mp4","461_17912s.mp4","463_15354s.mp4","464_14079s.mp4","465_15412s.mp4","466_14287s.mp4","467_15321s.mp4","470_15047s.mp4","472_14646s.mp4","475_15019s.mp4","476_104043s.mp4","479_15404s.mp4","480_15815s.mp4","481_15816s.mp4","482_14281s.mp4","483_15778s.mp4","484_41753s.mp4","487_14706s.mp4","488_14707s.mp4","490_14923s.mp4","491_15452s.mp4","494_72257s.mp4","495_20467s.mp4","496_20437s.mp4","497_15574s.mp4","498_15535s.mp4","499_15219s.mp4","500_15643s.mp4","501_16574s.mp4","502_14760s.mp4","504_15109s.mp4","506_20966s.mp4","507_15254s.mp4","509_15007s.mp4","513_36735s.mp4","515_102139s.mp4","516_15295s.mp4","517_102140s.mp4","518_14424s.mp4","520_102112s.mp4","521_14929s.mp4","523_72044s.mp4","524_15531s.mp4","525_54268s.mp4","526_14274s.mp4","527_15020s.mp4","528_14942s.mp4","529_17762s.mp4","531_14877s.mp4","532_16576s.mp4","533_17193s.mp4","534_14409s.mp4","535_111573s.mp4","536_14477s.mp4","537_17870s.mp4","538_15570s.mp4","539_14836s.mp4","540_117788s.mp4","541_94128s.mp4","542_14470s.mp4","543_15957s.mp4","544_15481s.mp4","546_15608s.mp4","548_15111s.mp4","549_15225s.mp4","550_72720s.mp4","551_79178s.mp4","554_14667s.mp4","555_104051s.mp4","556_20965s.mp4","557_14799s.mp4","558_36452s.mp4","559_14197s.mp4","560_14198s.mp4","561_36040s.mp4","562_14200s.mp4","563_36042s.mp4","564_36043s.mp4","565_36044s.mp4","567_15044s.mp4","570_39098s.mp4","571_14453s.mp4","574_15162s.mp4","575_13430s.mp4","576_12610s.mp4","577_12609s.mp4","578_103980s.mp4","579_20433s.mp4","580_50697s.mp4","582_94016s.mp4","583_15740s.mp4","584_15499s.mp4","585_98395s.mp4","586_14568s.mp4","587_14868s.mp4","588_15699s.mp4","591_14435s.mp4","593_15729s.mp4","594_104023s.mp4","595_14972s.mp4","596_72256s.mp4","597_15099s.mp4","598_15282s.mp4","599_15602s.mp4","601_94129s.mp4","602_14569s.mp4","603_14699s.mp4","604_117772s.mp4","605_14506s.mp4","606_94225s.mp4","607_22551s.mp4","608_94052s.mp4","609_15033s.mp4","610_14361s.mp4","611_14943s.mp4","612_15846s.mp4","613_22512s.mp4","615_14356s.mp4","616_14927s.mp4","617_22505s.mp4","618_14962s.mp4","619_17924s.mp4","620_14891s.mp4","621_14534s.mp4","622_15343s.mp4","623_14512s.mp4","624_14494s.mp4","625_14643s.mp4","626_15273s.mp4","627_14642s.mp4","628_15209s.mp4","629_15694s.mp4","630_15286s.mp4","631_14282s.mp4","632_14860s.mp4","633_15545s.mp4","634_15801s.mp4","635_14502s.mp4","636_72265s.mp4","637_72266s.mp4","638_14275s.mp4","640_20440s.mp4","642_15324s.mp4","643_15516s.mp4","644_14996s.mp4","646_14362s.mp4","647_15817s.mp4","648_14591s.mp4","649_20444s.mp4","650_14097s.mp4","651_104009s.mp4","652_14096s.mp4","653_14548s.mp4","654_15907s.mp4","655_14892s.mp4","656_15581s.mp4","657_17909s.mp4","658_21900s.mp4","659_14260s.mp4","661_15216s.mp4","662_15243s.mp4","663_14522s.mp4","664_15512s.mp4","665_14973s.mp4","666_12611s.mp4","667_101149s.mp4","668_14669s.mp4","669_15582s.mp4","670_15628s.mp4","671_15256s.mp4","672_15266s.mp4","689_14593s.mp4","708_15476s.mp4","723_14595s.mp4","724_14595s.mp4","725_15576s.mp4","727_21468s.mp4","729_20369s.mp4","730_14907s.mp4","731_15004s.mp4","732_96839s.mp4","734_14331s.mp4","735_15638s.mp4","736_14556s.mp4","737_17742s.mp4","738_15163s.mp4","740_14861s.mp4","741_80748s.mp4","742_14240s.mp4","743_104218s.mp4","744_94266s.mp4","745_14127s.mp4","746_104220s.mp4","747_93930s.mp4","748_14148s.mp4","749_104221s.mp4","751_14850s.mp4","752_14445s.mp4","753_15675s.mp4","755_21537s.mp4","756_14285s.mp4","757_14598s.mp4","758_15081s.mp4","759_79475s.mp4","760_14939s.mp4","761_15505s.mp4","762_15477s.mp4","763_16583s.mp4","769_15748s.mp4","770_17925s.mp4","772_15425s.mp4","773_14657s.mp4","774_14971s.mp4","775_14750s.mp4","776_20350s.mp4","778_21683s.mp4","779_15768s.mp4","780_15409s.mp4","781_15406s.mp4","782_17926s.mp4","784_15734s.mp4","786_15924s.mp4","788_14684s.mp4","789_94161s.mp4","791_21679s.mp4","792_15525s.mp4","793_14803s.mp4","795_15161s.mp4","796_15400s.mp4","797_17895s.mp4","798_14708s.mp4","801_14557s.mp4","802_51406s.mp4","803_20371s.mp4","804_14446s.mp4","805_14948s.mp4","808_14472s.mp4","809_15472s.mp4","811_14936s.mp4","813_15487s.mp4","814_119394s.mp4","815_35772s.mp4","817_119434s.mp4","818_15022s.mp4","819_72051s.mp4","823_15113s.mp4","824_101211s.mp4","826_15899s.mp4","827_14767s.mp4","828_14768s.mp4","829_14736s.mp4","830_15506s.mp4","832_15905s.mp4","833_15086s.mp4","834_14308s.mp4","835_15311s.mp4","836_15376s.mp4","837_21787s.mp4","838_13429s.mp4","839_21332s.mp4","840_14582s.mp4","841_13435s.mp4","842_40634s.mp4","843_15320s.mp4","844_15722s.mp4","845_106534s.mp4","846_72261s.mp4","848_14944s.mp4","849_14364s.mp4","850_14697s.mp4","851_15274s.mp4","852_14428s.mp4","853_14533s.mp4","855_15613s.mp4","856_119396s.mp4","857_15927s.mp4","858_20069s.mp4","859_20070s.mp4","860_20072s.mp4","861_20073s.mp4","862_20071s.mp4","864_78132s.mp4","865_78133s.mp4","866_15586s.mp4","867_16548s.mp4","868_14872s.mp4","869_15913s.mp4","870_14438s.mp4","871_15851s.mp4","872_18378s.mp4","874_94022s.mp4","876_94019s.mp4","875_94023s.mp4","878_94021s.mp4","877_94020s.mp4","879_94017s.mp4","880_94018s.mp4","881_15114s.mp4","882_21785s.mp4","883_15360s.mp4","884_14775s.mp4","885_15079s.mp4","886_14074s.mp4","887_55278s.mp4","889_15034s.mp4","892_14513s.mp4","893_39038s.mp4","894_15779s.mp4","895_111566s.mp4","897_15156s.mp4","898_15532s.mp4","899_112578s.mp4","900_14600s.mp4","901_14365s.mp4","902_16532s.mp4","903_14638s.mp4","904_15651s.mp4","906_14878s.mp4","908_14280s.mp4","909_20447s.mp4","911_54266s.mp4","912_87078s.mp4","913_87079s.mp4","914_87080s.mp4","915_87081s.mp4","916_87082s.mp4","917_87083s.mp4","919_87507s.mp4","920_87508s.mp4","921_87506s.mp4","922_87509s.mp4","923_87510s.mp4","924_14894s.mp4","925_15744s.mp4","926_15724s.mp4","927_15772s.mp4","928_15456s.mp4","929_14726s.mp4","930_17741s.mp4","931_15446s.mp4","932_15445s.mp4","933_14957s.mp4","934_20532s.mp4","935_80749s.mp4","936_51407s.mp4","937_104040s.mp4","938_14974s.mp4","941_98373s.mp4","942_14535s.mp4","943_14223s.mp4","944_12731s.mp4","945_14954s.mp4","946_15058s.mp4","947_15609s.mp4","948_15052s.mp4","949_78134s.mp4","950_91302s.mp4","951_15276s.mp4","952_14881s.mp4","953_15103s.mp4","954_15854s.mp4","955_15164s.mp4","956_12732s.mp4","957_104010s.mp4","958_14099s.mp4","959_14332s.mp4","961_15500s.mp4","962_14795s.mp4","963_14507s.mp4","964_14377s.mp4","966_15394s.mp4","967_71654s.mp4","968_17851s.mp4","969_15206s.mp4","970_15087s.mp4","971_104011s.mp4","973_14101s.mp4","974_105377s.mp4","975_15290s.mp4","976_14796s.mp4","977_72512s.mp4","978_36325s.mp4","979_21228s.mp4","981_77476s.mp4","982_21538s.mp4","983_15784s.mp4","984_15462s.mp4","985_104044s.mp4","986_15825s.mp4","989_72509s.mp4","990_14080s.mp4","991_14075s.mp4","992_14256s.mp4","993_15749s.mp4","994_14333s.mp4","995_15915s.mp4","996_14635s.mp4","997_14811s.mp4","998_14495s.mp4","999_18012s.mp4","1000_14738s.mp4","1001_15053s.mp4","1002_15626s.mp4","1003_15013s.mp4","1004_14985s.mp4","1005_14797s.mp4","1006_15667s.mp4","1008_15427s.mp4","1010_20098s.mp4","1011_15635s.mp4","1012_15636s.mp4","1013_15743s.mp4","1015_14863s.mp4","1016_15023s.mp4","1018_16578s.mp4","1019_14659s.mp4","1020_15210s.mp4","1021_14496s.mp4","1022_20368s.mp4","1024_79183s.mp4","1026_15615s.mp4","1027_20468s.mp4","1028_14924s.mp4","1029_15205s.mp4","1030_14523s.mp4","1031_14297s.mp4","1032_14524s.mp4","1033_15507s.mp4","1034_14873s.mp4","1035_15428s.mp4","1036_15725s.mp4","1038_17896s.mp4","1039_15030s.mp4","1040_15478s.mp4","1041_14105s.mp4","1043_15479s.mp4","1044_18125s.mp4","1045_45131s.mp4","1046_15334s.mp4","1047_15426s.mp4","1048_15501s.mp4","1049_15697s.mp4","1050_79410s.mp4","1051_14276s.mp4","1052_14540s.mp4","1056_15197s.mp4","1057_15014s.mp4","1059_96847s.mp4","1060_15444s.mp4","1062_14787s.mp4","1064_20486s.mp4","1065_13432s.mp4","1066_45912s.mp4","1067_14660s.mp4","1068_14302s.mp4","1069_15677s.mp4","1071_119398s.mp4","1072_15302s.mp4","1073_80169s.mp4","1074_15797s.mp4","1075_21786s.mp4","1076_14307s.mp4","1077_14261s.mp4","1078_15116s.mp4","1079_20370s.mp4","1085_101213s.mp4","1086_15717s.mp4","1088_14497s.mp4","1089_14703s.mp4","1090_17871s.mp4","1091_15024s.mp4","1092_15101s.mp4","1093_94240s.mp4","1094_14879s.mp4","1095_15518s.mp4","1096_22511s.mp4","1097_14865s.mp4","1098_15678s.mp4","1099_15587s.mp4","1100_14776s.mp4","1101_15191s.mp4","1102_14530s.mp4","1103_14714s.mp4","1104_15377s.mp4","1105_17320s.mp4","1106_17928s.mp4","1107_15230s.mp4","1109_15312s.mp4","1111_18100s.mp4","1112_14106s.mp4","1113_104012s.mp4","1114_21377s.mp4","1115_12911s.mp4","1116_14107s.mp4","1117_119011s.mp4","1118_14337s.mp4","1119_101214s.mp4","1120_18221s.mp4","1121_15387s.mp4","1122_17764s.mp4","1127_15760s.mp4","1128_20533s.mp4","1129_15637s.mp4","1130_14770s.mp4","1131_14777s.mp4","1132_14715s.mp4","1133_14454s.mp4","1136_14455s.mp4","1138_15418s.mp4","1139_15658s.mp4","1140_15652s.mp4","1141_15083s.mp4","1142_14981s.mp4","1143_15299s.mp4","1144_15745s.mp4","1146_14456s.mp4","1147_14884s.mp4","1148_20442s.mp4","1149_15771s.mp4","1150_14887s.mp4","1151_36456s.mp4","1152_14413s.mp4","1153_15166s.mp4","1154_22014s.mp4","1155_14443s.mp4","1156_14866s.mp4","1157_14821s.mp4","1158_15642s.mp4","1159_47718s.mp4","1160_15257s.mp4","1161_14225s.mp4","1162_15547s.mp4","1163_15533s.mp4","1164_15588s.mp4","1165_14457s.mp4","1166_15589s.mp4","1167_14758s.mp4","1168_14737s.mp4","1169_15502s.mp4","1170_15802s.mp4","1171_14930s.mp4","1173_14157s.mp4","1175_14761s.mp4","1176_14844s.mp4","1178_14478s.mp4","1179_14661s.mp4","1180_15363s.mp4","1181_15653s.mp4","1183_72506s.mp4","1184_15750s.mp4","1185_15751s.mp4","1186_15752s.mp4","1187_15753s.mp4","1188_15921s.mp4","1189_15143s.mp4","1191_14267s.mp4","1192_20341s.mp4","1193_14867s.mp4","1194_15700s.mp4","1196_20418s.mp4","1197_102118s.mp4","1198_21013s.mp4","1199_20438s.mp4","1200_14204s.mp4","1202_52133s.mp4","1203_15862s.mp4","1204_14847s.mp4","1205_16544s.mp4","1206_15293s.mp4","1207_14309s.mp4","1208_12612s.mp4","1209_94227s.mp4","1210_12614s.mp4","1211_98387s.mp4","1212_12616s.mp4","1213_12617s.mp4","1214_98388s.mp4","1215_12619s.mp4","1216_94228s.mp4","1217_12621s.mp4","1218_15513s.mp4","1219_79477s.mp4","1220_78131s.mp4","1223_49264s.mp4","1224_20419s.mp4","1225_15705s.mp4","1226_16567s.mp4","1227_117770s.mp4","1228_17251s.mp4","1229_14739s.mp4","1231_102116s.mp4","1233_104192s.mp4","1234_15413s.mp4","1235_14908s.mp4","1237_94489s.mp4","1238_15942s.mp4","1239_15735s.mp4","1241_15522s.mp4","1242_14903s.mp4","1243_14727s.mp4","1244_15374s.mp4","1245_72507s.mp4","1246_18070s.mp4","1247_14728s.mp4","1249_15117s.mp4","1250_14262s.mp4","1251_15819s.mp4","1252_77499s.mp4","1253_15378s.mp4","1254_15463s.mp4","1255_14414s.mp4","1257_45129s.mp4","1259_21548s.mp4","1261_14882s.mp4","1263_14685s.mp4","1265_15369s.mp4","1266_14851s.mp4","1267_15322s.mp4","1268_15248s.mp4","1269_15247s.mp4","1270_15833s.mp4","1271_16562s.mp4","1273_15067s.mp4","1274_14111s.mp4","1275_14110s.mp4","1276_17855s.mp4","1278_15167s.mp4","1277_15508s.mp4","1279_14692s.mp4","1280_14479s.mp4","1281_14259s.mp4","1283_13434s.mp4","1284_15719s.mp4","1285_14447s.mp4","1286_14575s.mp4","1287_79181s.mp4","1289_14293s.mp4","1290_15314s.mp4","1291_78135s.mp4","1292_15627s.mp4","1293_14789s.mp4","1297_79442s.mp4","1298_17897s.mp4","1299_15294s.mp4","1300_14498s.mp4","1301_14340s.mp4","1302_14341s.mp4","1303_101219s.mp4","1305_91081s.mp4","1307_20356s.mp4","1309_15048s.mp4","1310_15049s.mp4","1311_15050s.mp4","1312_55279s.mp4","1313_15284s.mp4","1314_15388s.mp4","1315_104052s.mp4","1316_15818s.mp4","1317_15633s.mp4","1318_15346s.mp4","1319_14481s.mp4","1320_17336s.mp4","1321_14951s.mp4","1322_14874s.mp4","1323_15523s.mp4","1326_14639s.mp4","1327_14740s.mp4","1329_78136s.mp4","1330_15464s.mp4","1331_15319s.mp4","1334_14729s.mp4","1336_49265s.mp4","1337_110806s.mp4","1338_14602s.mp4","1339_14112s.mp4","1340_87367s.mp4","1341_15780s.mp4","1342_15482s.mp4","1343_14825s.mp4","1344_115983s.mp4","1345_20446s.mp4","1346_15690s.mp4","1347_14499s.mp4","1348_14500s.mp4","1349_14458s.mp4","1350_14798s.mp4","1351_14565s.mp4","1352_36600s.mp4","1353_94174s.mp4","1355_15659s.mp4","1356_14558s.mp4","1357_14415s.mp4","1359_14286s.mp4","1360_14448s.mp4","1361_14113s.mp4","1363_20432s.mp4","1364_14822s.mp4","1365_15259s.mp4","1367_16580s.mp4","1368_15389s.mp4","1369_15035s.mp4","1370_13266s.mp4","1371_21686s.mp4","1372_15788s.mp4","1373_15707s.mp4","1374_14603s.mp4","1375_15720s.mp4","1377_14563s.mp4","1378_14698s.mp4","1382_15835s.mp4","1383_15837s.mp4","1384_15839s.mp4","1385_15841s.mp4","1386_15842s.mp4","1387_15843s.mp4","1388_15656s.mp4","1389_18043s.mp4","1390_17282s.mp4","1391_15836s.mp4","1392_14437s.mp4","1393_15565s.mp4","1394_15564s.mp4","1395_14852s.mp4","1396_15718s.mp4","1398_14709s.mp4","1400_17396s.mp4","1401_15287s.mp4","1403_15347s.mp4","1404_21504s.mp4","1405_14473s.mp4","1406_14449s.mp4","1407_14450s.mp4","1408_15026s.mp4","1411_15118s.mp4","1413_39156s.mp4","1414_94040s.mp4","1415_15157s.mp4","1418_15595s.mp4","1419_119390s.mp4","1420_14382s.mp4","1421_46778s.mp4","1422_15603s.mp4","1423_36323s.mp4","1425_14853s.mp4","1426_45914s.mp4","1427_100844s.mp4","1428_14516s.mp4","1430_15325s.mp4","1431_14816s.mp4","1432_14416s.mp4","1433_14417s.mp4","1434_14741s.mp4","1435_15548s.mp4","1436_14778s.mp4","1437_15039s.mp4","1439_117787s.mp4","1440_79407s.mp4","1441_51402s.mp4","1442_14674s.mp4","1443_15339s.mp4","1444_14418s.mp4","1445_14580s.mp4","1448_15278s.mp4","1449_15036s.mp4","1450_15119s.mp4","1451_22392s.mp4","1452_15078s.mp4","1453_17188s.mp4","1454_14710s.mp4","1455_15935s.mp4","1456_15297s.mp4","1457_15465s.mp4","1458_15279s.mp4","1463_15348s.mp4","1464_17309s.mp4","1465_20451s.mp4","1466_101136s.mp4","1467_15604s.mp4","1468_14771s.mp4","1469_16524s.mp4","1470_15104s.mp4","1471_14518s.mp4","1472_14517s.mp4","1473_15429s.mp4","1474_14474s.mp4","1475_14893s.mp4","1477_14955s.mp4","1478_15629s.mp4","1479_14716s.mp4","1480_117779s.mp4","1481_14360s.mp4","1482_117782s.mp4","1483_14941s.mp4","1484_36736s.mp4","1488_15349s.mp4","1489_15315s.mp4","1490_15152s.mp4","1491_51404s.mp4","1492_15146s.mp4","1493_15145s.mp4","1494_15008s.mp4","1495_15420s.mp4","1496_15590s.mp4","1497_14543s.mp4","1498_18164s.mp4","1499_14689s.mp4","1500_117776s.mp4","1502_14484s.mp4","1503_14693s.mp4","1504_15829s.mp4","1505_14292s.mp4","1506_14290s.mp4","1507_14263s.mp4","1508_14264s.mp4","1509_14291s.mp4","1510_77500s.mp4","1511_14560s.mp4","1512_15316s.mp4","1513_14848s.mp4","1514_15355s.mp4","1515_14790s.mp4","1516_14662s.mp4","1517_104042s.mp4","1518_17372s.mp4","1519_14570s.mp4","1521_14640s.mp4","1522_94054s.mp4","1523_14718s.mp4","1524_15168s.mp4","1525_15922s.mp4","1526_15224s.mp4","1527_14982s.mp4","1528_15261s.mp4","1529_14528s.mp4","1531_15059s.mp4","1532_18273s.mp4","1533_16997s.mp4","1534_14604s.mp4","1536_21791s.mp4","1538_14678s.mp4","1539_14759s.mp4","1540_15317s.mp4","1541_14077s.mp4","1542_13436s.mp4","1543_15812s.mp4","1544_15356s.mp4","1545_16551s.mp4","1546_21375s.mp4","1547_36457s.mp4","1548_36458s.mp4","1549_36459s.mp4","1550_36460s.mp4","1551_36461s.mp4","1552_36593s.mp4","1553_36594s.mp4","1554_36595s.mp4","1555_36596s.mp4","1556_14391s.mp4","1557_15538s.mp4","1558_15120s.mp4","1559_14116s.mp4","1560_87369s.mp4","1565_15414s.mp4","1566_17249s.mp4","1567_80167s.mp4","1568_14791s.mp4","1569_15169s.mp4","1570_15027s.mp4","1573_15792s.mp4","1574_14304s.mp4","1575_14932s.mp4","1576_15280s.mp4","1577_14605s.mp4","1578_15408s.mp4","1579_15407s.mp4","1580_17884s.mp4","1581_14119s.mp4","1583_14875s.mp4","1584_15466s.mp4","1585_14265s.mp4","1586_14553s.mp4","1587_14536s.mp4","1588_14278s.mp4","1589_14876s.mp4","1590_102123s.mp4","1591_94056s.mp4","1595_15170s.mp4","1598_94057s.mp4","1599_20474s.mp4","1600_20475s.mp4","1601_43133s.mp4","1602_44088s.mp4","1603_44089s.mp4","1604_44090s.mp4","1605_44091s.mp4","1606_44092s.mp4","1607_42279s.mp4","1608_15694s.mp4","1609_43134s.mp4","1610_20476s.mp4","1612_17826s.mp4","1614_15761s.mp4","1615_117781s.mp4","1616_15198s.mp4","1617_101224s.mp4","1618_15410s.mp4","1619_101225s.mp4","1621_15524s.mp4","1623_14925s.mp4","1624_103982s.mp4","1625_15344s.mp4","1626_14305s.mp4","1627_14549s.mp4","1629_14679s.mp4","1630_15529s.mp4","1631_15549s.mp4","1632_21470s.mp4","1633_16568s.mp4","1634_15105s.mp4","1635_14268s.mp4","1636_13431s.mp4","1637_22515s.mp4","1638_14958s.mp4","1639_16569s.mp4","1640_14633s.mp4","1641_15577s.mp4","1642_14550s.mp4","1644_21333s.mp4","1645_99980s.mp4","1647_15489s.mp4","1648_14901s.mp4","1649_14899s.mp4","1650_15661s.mp4","1652_20367s.mp4","1653_15123s.mp4","1654_15125s.mp4","1655_70800s.mp4","1656_15237s.mp4","1657_15147s.mp4","1658_14451s.mp4","1659_47669s.mp4","1660_20379s.mp4","1661_16557s.mp4","1662_15510s.mp4","1663_14933s.mp4","1664_14509s.mp4","1665_14288s.mp4","1666_14551s.mp4","1668_14366s.mp4","1669_14346s.mp4","1671_15550s.mp4","1672_14721s.mp4","1673_15236s.mp4","1674_15310s.mp4","1675_15361s.mp4","1676_21903s.mp4","1677_14310s.mp4","1678_14122s.mp4","1679_93962s.mp4","1680_14114s.mp4","1681_104013s.mp4","1683_14087s.mp4","1684_104216s.mp4","1685_93965s.mp4","1686_14576s.mp4","1687_14663s.mp4","1688_15911s.mp4","1689_117774s.mp4","1690_20976s.mp4","1692_20424s.mp4","1693_12733s.mp4","1694_87370s.mp4","1695_14606s.mp4","1696_14367s.mp4","1697_94097s.mp4","1698_14521s.mp4","1700_20435s.mp4","1699_20434s.mp4","1701_20436s.mp4","1702_21218s.mp4","1703_14298s.mp4","1704_80464s.mp4","1706_112046s.mp4","1707_15092s.mp4","1708_16537s.mp4","1709_14607s.mp4","1711_15379s.mp4","1713_15042s.mp4","1714_14668s.mp4","1715_15005s.mp4","1718_15680s.mp4","1719_14673s.mp4","1720_15928s.mp4","1721_15207s.mp4","1722_14508s.mp4","1723_15490s.mp4","1724_15491s.mp4","1725_16547s.mp4","1726_79439s.mp4","1727_14926s.mp4","1728_45915s.mp4","1729_14949s.mp4","1730_14368s.mp4","1731_14871s.mp4","1733_15345s.mp4","1734_14779s.mp4","1735_15303s.mp4","1737_20340s.mp4","1739_14609s.mp4","1740_21427s.mp4","1741_15820s.mp4","1742_15733s.mp4","1743_15732s.mp4","1745_14815s.mp4","1746_14690s.mp4","1747_14997s.mp4","1748_18286s.mp4","1750_18289s.mp4","1751_18290s.mp4","1756_14677s.mp4","1757_15793s.mp4","1758_15357s.mp4","1760_15755s.mp4","1761_15754s.mp4","1762_15657s.mp4","1763_14655s.mp4","1764_14656s.mp4","1765_15662s.mp4","1766_15663s.mp4","1767_15183s.mp4","1769_15664s.mp4","1771_14544s.mp4","1772_14545s.mp4","1773_14784s.mp4","1774_98378s.mp4","1775_15606s.mp4","1776_14613s.mp4","1777_14812s.mp4","1778_14813s.mp4","1779_80172s.mp4","1780_15326s.mp4","1781_17910s.mp4","1782_15762s.mp4","1783_117786s.mp4","1784_15781s.mp4","1785_79182s.mp4","1786_122014s.mp4","1787_14258s.mp4","1788_21572s.mp4","1789_15483s.mp4","1790_15492s.mp4","1791_15031s.mp4","1793_20973s.mp4","1794_14994s.mp4","1795_15327s.mp4","1796_15681s.mp4","1797_15682s.mp4","1798_15932s.mp4","1799_14935s.mp4","1800_14311s.mp4","1801_14914s.mp4","1802_20417s.mp4","1803_15785s.mp4","1804_14610s.mp4","1805_15395s.mp4","1806_14817s.mp4","1807_15519s.mp4","1808_14977s.mp4","1809_20423s.mp4","1810_14864s.mp4","1812_104025s.mp4","1813_14780s.mp4","1814_78128s.mp4","1816_14983s.mp4","1817_20372s.mp4","1818_15457s.mp4","1819_14392s.mp4","1820_14720s.mp4","1821_14537s.mp4","1822_39127s.mp4","1824_14578s.mp4","1825_15390s.mp4","1827_102128s.mp4","1828_15288s.mp4","1829_21684s.mp4","1830_15831s.mp4","1831_117778s.mp4","1832_15009s.mp4","1833_15945s.mp4","1834_14988s.mp4","1835_14989s.mp4","1836_14888s.mp4","1837_14369s.mp4","1838_15397s.mp4","1840_15573s.mp4","1841_14918s.mp4","1842_15736s.mp4","1843_14800s.mp4","1845_14742s.mp4","1846_100059s.mp4","1847_14781s.mp4","1848_15929s.mp4","1849_117783s.mp4","1850_102117s.mp4","1851_51403s.mp4","1852_15301s.mp4","1853_15514s.mp4","1854_72042s.mp4","1855_14562s.mp4","1856_15430s.mp4","1857_15821s.mp4","1858_15238s.mp4","1861_15433s.mp4","1862_14271s.mp4","1863_15128s.mp4","1866_15763s.mp4","1867_15916s.mp4","1868_14743s.mp4","1869_15822s.mp4","1870_14792s.mp4","1871_14385s.mp4","1872_71300s.mp4","1873_15686s.mp4","1874_14688s.mp4","1875_94163s.mp4","1876_15901s.mp4","1877_21338s.mp4","1878_15095s.mp4","1879_15902s.mp4","1880_14745s.mp4","1881_14078s.mp4","1882_15055s.mp4","1883_117777s.mp4","1884_15493s.mp4","1885_115204s.mp4","1886_15520s.mp4","1887_15630s.mp4","1888_14552s.mp4","1889_52132s.mp4","1890_16546s.mp4","1891_15185s.mp4","1892_16506s.mp4","1893_15786s.mp4","1894_17123s.mp4","1895_15129s.mp4","1896_99996s.mp4","1897_72254s.mp4","1898_14312s.mp4","1899_15709s.mp4","1900_15728s.mp4","1901_15473s.mp4","1902_15611s.mp4","1903_35950s.mp4","1904_15591s.mp4","1905_14744s.mp4","1906_14992s.mp4","1907_14719s.mp4","1908_14266s.mp4","1909_15217s.mp4","1910_14475s.mp4","1912_14299s.mp4","1913_15521s.mp4","1914_14854s.mp4","1915_117785s.mp4","1916_14686s.mp4","1917_15597s.mp4","1918_15694s.mp4","1919_17898s.mp4","1920_14394s.mp4","1921_15806s.mp4","1922_15623s.mp4","1923_14579s.mp4","1924_15794s.mp4","1925_104050s.mp4","1926_52134s.mp4","1927_14257s.mp4","1928_20449s.mp4","1929_15694s.mp4","1930_14722s.mp4","1931_14279s.mp4","1932_15738s.mp4","1936_14830s.mp4","1937_14829s.mp4","1938_72263s.mp4","1939_72255s.mp4","1940_21219s.mp4","1941_15391s.mp4","1942_14370s.mp4","1943_15614s.mp4","1944_118409s.mp4","1945_79179s.mp4","1946_15639s.mp4","1948_117748s.mp4","1949_14503s.mp4","1950_20463s.mp4","1951_20342s.mp4","1952_21467s.mp4","1953_20416s.mp4","1954_20967s.mp4","1955_14539s.mp4","1956_15612s.mp4","1957_14611s.mp4","1961_104041s.mp4","1962_15358s.mp4","1963_14452s.mp4","1965_15863s.mp4","1966_15271s.mp4","1967_15592s.mp4","1968_15448s.mp4","1969_15599s.mp4","1970_15130s.mp4","1971_15037s.mp4","1972_96896s.mp4","1973_14940s.mp4","1974_14427s.mp4","1975_15435s.mp4","1976_15436s.mp4","1977_15437s.mp4","1978_15634s.mp4","1982_15598s.mp4","1983_14855s.mp4","1984_12734s.mp4","1985_14124s.mp4","1986_21471s.mp4","1987_15554s.mp4","1989_17927s.mp4","1990_14664s.mp4","1991_17393s.mp4","1992_20439s.mp4","1993_15889s.mp4","1994_117768s.mp4","1995_15515s.mp4","1997_15171s.mp4","1998_15172s.mp4","1999_14531s.mp4","2000_15467s.mp4","2001_15158s.mp4","2002_14123s.mp4","2003_14126s.mp4","2004_15858s.mp4","2005_14098s.mp4","2007_14965s.mp4","2008_20333s.mp4","2009_14155s.mp4","2013_14108s.mp4","2014_77505s.mp4","2015_15567s.mp4","2016_15886s.mp4","2017_15813s.mp4","2018_14889s.mp4","2021_15737s.mp4","2022_15045s.mp4","2023_98385s.mp4","2024_15221s.mp4","2026_14146s.mp4","2027_14153s.mp4","2030_16543s.mp4","2031_94154s.mp4","2033_104006s.mp4","2034_14125s.mp4","2035_16558s.mp4","2036_94118s.mp4","2037_14348s.mp4","2038_93993s.mp4","2040_15398s.mp4","2041_14956s.mp4","2042_15809s.mp4","2043_15132s.mp4","2044_15281s.mp4","2045_15739s.mp4","2047_16566s.mp4","2049_14515s.mp4","2050_14704s.mp4","2051_14986s.mp4","2052_87544s.mp4","2053_18089s.mp4","2054_15469s.mp4","2056_104045s.mp4","2057_119439s.mp4","2058_14730s.mp4","2059_17316s.mp4","2060_14999s.mp4","2061_14987s.mp4","2062_15823s.mp4","2064_104046s.mp4","2065_15106s.mp4","2066_80170s.mp4","2067_78129s.mp4","2068_14459s.mp4","2069_15832s.mp4","2070_14717s.mp4","2071_15593s.mp4","2072_15795s.mp4","2073_15173s.mp4","2074_15568s.mp4","2075_14532s.mp4","2078_14371s.mp4","2079_21220s.mp4","2080_118968s.mp4","2081_15134s.mp4","2082_15480s.mp4","2083_15726s.mp4","2084_15226s.mp4","2085_104206s.mp4","2087_14396s.mp4","2089_15186s.mp4","2090_15029s.mp4","2091_14441s.mp4","2093_14295s.mp4","2095_14349s.mp4","2096_14520s.mp4","2097_52137s.mp4","2098_15269s.mp4","2100_15270s.mp4","2102_14978s.mp4","2104_14645s.mp4","2107_15470s.mp4","2108_14634s.mp4","2109_94025s.mp4","2110_15447s.mp4","2111_14277s.mp4","2112_15102s.mp4","2113_71656s.mp4","2114_14762s.mp4","2115_119045s.mp4","2116_15790s.mp4","2118_14763s.mp4","2119_22401s.mp4","2121_15787s.mp4","2122_14350s.mp4","2123_94233s.mp4","2124_21464s.mp4","2125_43131s.mp4","2126_15625s.mp4","2127_15596s.mp4","2128_15011s.mp4","2129_15012s.mp4","2131_14824s.mp4","2132_14959s.mp4","2133_14514s.mp4","2134_14614s.mp4","2135_15100s.mp4","2136_15061s.mp4","2137_14675s.mp4","2138_15332s.mp4","2139_20422s.mp4","2140_14896s.mp4","2141_20441s.mp4","2146_15341s.mp4","2147_14564s.mp4","2148_14384s.mp4","2149_14379s.mp4","2150_14380s.mp4","2151_14381s.mp4","2152_15304s.mp4","2153_95635s.mp4","2154_17399s.mp4","2155_14641s.mp4","2156_15283s.mp4","2157_15298s.mp4","2158_94155s.mp4","2159_94178s.mp4","2161_15135s.mp4","2163_15199s.mp4","2164_15010s.mp4","2165_15933s.mp4","2167_16570s.mp4","2168_15421s.mp4","2169_15422s.mp4","2170_15423s.mp4","2171_15424s.mp4","2172_117282s.mp4","2173_15318s.mp4","2174_17929s.mp4","2175_15925s.mp4","2176_20465s.mp4","2177_20461s.mp4","2178_104039s.mp4","2180_94026s.mp4","2181_14313s.mp4","2182_15619s.mp4","2183_80750s.mp4","2184_14504s.mp4","2186_94027s.mp4","2187_15056s.mp4","2188_99982s.mp4","2189_15958s.mp4","2190_14917s.mp4","2191_21222s.mp4","2192_15632s.mp4","2194_15392s.mp4","2197_17346s.mp4","2198_15594s.mp4","2199_17880s.mp4","2200_14615s.mp4","2201_94235s.mp4","2202_15393s.mp4","2203_102133s.mp4","2205_14998s.mp4","2207_15824s.mp4","2208_14838s.mp4","2209_14839s.mp4","2210_14840s.mp4","2217_15383s.mp4","2223_72047s.mp4","2224_36327s.mp4","2225_14696s.mp4","2226_102119s.mp4","2227_14731s.mp4","2228_14694s.mp4","2229_18063s.mp4","2230_15766s.mp4","2232_15471s.mp4","2234_15930s.mp4","2235_14705s.mp4","2237_15767s.mp4","2239_77501s.mp4","2240_15665s.mp4","2241_15951s.mp4","2243_15694s.mp4","2244_15458s.mp4","2247_19930s.mp4","2248_17350s.mp4","2249_14483s.mp4","2252_14683s.mp4","2254_15150s.mp4","2255_14805s.mp4","2256_17261s.mp4","2257_15845s.mp4","2259_15174s.mp4","2260_15432s.mp4","2262_15149s.mp4","2263_100833s.mp4","2264_117784s.mp4","2265_14856s.mp4","2266_14351s.mp4","2267_14711s.mp4","2268_14712s.mp4","2269_15640s.mp4","2270_101227s.mp4","2271_15415s.mp4","2272_94180s.mp4","2276_15601s.mp4","2277_52136s.mp4","2278_15351s.mp4","2280_15764s.mp4","2281_15770s.mp4","2282_15046s.mp4","2283_14658s.mp4","2285_14519s.mp4","2286_15494s.mp4","2287_15352s.mp4","2288_22514s.mp4","2289_14947s.mp4","2290_14505s.mp4","2292_15526s.mp4","2293_20384s.mp4","2294_14967s.mp4","2296_14793s.mp4","2297_15371s.mp4","2298_102134s.mp4","2299_119007s.mp4","2301_15453s.mp4","2302_80465s.mp4","2303_17938s.mp4","2304_17429s.mp4","2305_15713s.mp4","2306_15544s.mp4","2307_14808s.mp4","2308_115973s.mp4","2310_14584s.mp4","2311_14583s.mp4","2312_72510s.mp4","2313_14890s.mp4","2314_14617s.mp4","2315_14616s.mp4","2316_15227s.mp4","2317_15263s.mp4","2319_20968s.mp4","2321_14702s.mp4","2322_77506s.mp4","2323_77507s.mp4","2324_80174s.mp4","2325_14289s.mp4","2326_14782s.mp4","2327_14783s.mp4","2328_14804s.mp4","2331_39097s.mp4","2332_14766s.mp4","2333_15038s.mp4","2334_22513s.mp4","2335_15380s.mp4","2337_15539s.mp4","2338_15323s.mp4","2339_17899s.mp4","2340_15527s.mp4","2342_14429s.mp4","2344_16571s.mp4","2345_14950s.mp4","2347_80457s.mp4","2348_21370s.mp4","2350_101145s.mp4","2354_14294s.mp4","2355_16573s.mp4","2356_17873s.mp4","2357_72250s.mp4","2358_152077s.mp4","2360_17975s.mp4","2361_15176s.mp4","2362_15864s.mp4","2363_15666s.mp4","2364_21894s.mp4","2365_15438s.mp4","2366_15350s.mp4"];

var totalSecondsFromStart = 0;

/**
 * Get Seconds from Start
 */
function getSecondsfromStart(i) {
  if(i < videos.length) {
    var filename = videos[i];
    var id = parseInt(filename.split("_")[0]);

    console.log(filename, id);
    exec("ffmpeg -i  unified/" + filename + " 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//", function(stderr, stdout, data) {
      var seconds = convertTimeCodeToSeconds(stdout.replace("\n", ""), 25);
    
      pool.query("UPDATE works SET totalSecondsStart = ? WHERE id = ?", [totalSecondsFromStart, id], function() {
        totalSecondsFromStart = totalSecondsFromStart + seconds;

        console.log(id, " :: ", totalSecondsFromStart);
        getSecondsfromStart(i+1);

      });

    });

  } else {
    console.log("done");
  }

}

/**
 * Convert Time Code to Seconds
 */
function convertTimeCodeToSeconds(timeString, framerate) {

  var timeArray = timeString.split(":");
  console.log(timeArray);
  var hours   = parseInt(timeArray[0]) * 60 * 60;
  var minutes = parseInt(timeArray[1]) * 60;
  var seconds = parseFloat(timeArray[2]);
  var totalTime = hours + minutes + seconds;
  console.log(totalTime);

  return totalTime;
}

/**
 * Concat Multiple Video Files into one
 */

function concatVideos(path, callback) {
  var cmd = "cd concat-test/new/; pwd; ffmpeg -f concat -i <(for f in ./*.mp4; do echo \"file '$PWD/$f'\"; done) -c copy joined.mp4";
  var child = exec(cmd);

  child.stdout.on('data', function(data) {
    console.log('stdout: ' + data);
  });

  child.stderr.on('data', function(data) {
    console.log('stdout: ' + data);
  });

  child.on('close', function(code) {
    console.log('closing code: ' + code);
    callback("done");
  });

}


